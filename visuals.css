/* --- 1. LOCALIZATION DATASTRINGS --- */
:root {
    --t-start-en: "INITIALIZE_AEGIS_LINK"; 
    --t-start-cn: "啟動核心系統連結";
    --t-save-en: "KAFRA_SYNC"; 
    --t-save-cn: "卡普拉同步存檔";
}

/* Inject strings based on language class */
.lang-en { --u-start: var(--t-start-en); --u-save: var(--t-save-en); }
.lang-cn { --u-start: var(--t-start-cn); --u-save: var(--t-save-cn); }

[data-t="start"]::before { content: var(--u-start); }
[data-t="save"]::before { content: var(--u-save); }

/* --- 2. THE SPRITE STAGE (RENDERER) --- */
#stage {
    min-height: 140px;
    background: linear-gradient(180deg, #000 0%, #0d1a0d 100%);
    display: flex;
    justify-content: space-around;
    align-items: flex-end;
    position: relative;
    padding-bottom: 25px;
    overflow: hidden;
    border: 1px solid var(--neon);
}

/* CRT SCANLINE OVERLAY */
#stage::after {
    content: " ";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.15) 50%);
    background-size: 100% 4px;
    pointer-events: none;
    z-index: 10;
}

/* --- 3. CHARACTER GEOMETRY --- */
.avatar-box {
    width: 60px;
    height: 80px;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    z-index: 5;
}

.spr {
    width: 28px;
    height: 40px;
    position: relative;
    animation: idle-bob 1.5s infinite ease-in-out;
}

/* RO-style Geometric Blocks */
.hd { width: 22px; height: 20px; background: #fca; border: 1px solid #333; position: absolute; top: 0; left: 3px; border-radius: 4px; }
.bd { width: 20px; height: 24px; background: #eee; border: 1px solid #333; position: absolute; bottom: 0; left: 4px; border-radius: 2px; }

/* JOB COSTUMES (Colors) */
.j-Swordman .bd { background: #d84; }
.j-Mage .bd { background: #4af; }
.j-Thief .bd { background: #444; }
.j-Archer .bd { background: #8a4; }
.j-Acolyte .bd { background: #fff; }
.j-Merchant .bd { background: #633; }
.j-Knight .bd { background: #c0c0c0; border: 1px solid #fff; }
.j-Assassin .bd { background: #111; border-color: var(--rare); }

/* --- 4. COMBAT ANIMATIONS --- */
@keyframes idle-bob {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(6px); }
}

.hit-shake { animation: shake 0.2s ease-in-out; }
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* MVP Warning Overlay */
.warning-overlay { 
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
    background: rgba(255, 0, 0, 0.4); z-index: 20; 
    display: flex; align-items: center; justify-content: center;
    border: 3px solid #ff2a2a; animation: flash-red 0.4s infinite;
}

.warning-text { 
    color: #fff; font-weight: 900; letter-spacing: 6px; 
    text-shadow: 0 0 10px #ff2a2a; font-size: 1.4rem;
    font-family: Arial, sans-serif;
}

@keyframes flash-red { 0% { opacity: 0.5; } 100% { opacity: 1; } }

/* --- 5. MONSTER SPECIFIC DATA-TYPES --- */
/* Target-specific styling triggered by the Aegis Logic */
[data-mob*="MVP"] .spr { transform: scale(1.5); filter: drop-shadow(0 0 5px gold); }
[data-mob="Poring"] .spr .bd { background: #f8a; border-radius: 50%; height: 20px; }
[data-mob="Poring"] .spr .hd { display: none; }
