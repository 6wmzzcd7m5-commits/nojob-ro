/* --- DB LAYER 1: UNIVERSAL TRANSLATIONS --- */
:root {
    /* Colors from v3 Engine */
    --bg: #111; --panel: #222; --border: #444; --text: #eee;
    --hp: #ff5555; --sp: #55aaff; --c-n: #55ff55; --bd: #444;
    --r: #ffeb3b;

    /* English Dictionary */
    --t-save-en: "SAVE"; --t-load-en: "LOAD"; 
    --t-fight-en: "FIGHT"; --t-start-en: "START JOURNEY";
    
    /* Chinese Dictionary */
    --t-save-cn: "存檔"; --t-load-cn: "讀檔"; 
    --t-fight-cn: "戰鬥"; --t-start-cn: "開啟冒險";
}

/* Logic: Mapping based on Body Class */
.lang-en { --u-save: var(--t-save-en); --u-fight: var(--t-fight-en); --u-start: var(--t-start-en); }
.lang-cn { --u-save: var(--t-save-cn); --u-fight: var(--t-fight-cn); --u-start: var(--t-start-cn); }

/* Automated Translation Injection */
[data-t="save"]::before { content: var(--u-save); }
[data-t="fight"]::before { content: var(--u-fight); }
[data-t="start"]::before { content: var(--u-start); }

/* --- CORE UI STYLING --- */
body { 
    background: var(--bg); color: var(--text); 
    font-family: system-ui, monospace; margin: 0; padding: 10px;
    display: flex; flex-direction: column; gap: 15px;
}

.panel { 
    background: var(--panel); border: 1px solid var(--border); 
    padding: 10px; border-radius: 8px;
}

progress { 
    width: 100%; height: 8px; appearance: none; border: none;
    background: #444; border-radius: 4px; overflow: hidden; display: block;
}
progress::-webkit-progress-bar { background: #444; }
progress::-webkit-progress-value { transition: width 0.3s; }

#hp-bar::-webkit-progress-value { background: var(--hp); }
#sp-bar::-webkit-progress-value { background: var(--sp); }
#atb-p::-webkit-progress-value { background: var(--c-n); }
#atb-e::-webkit-progress-value { background: var(--hp); }

/* --- LAYERED SPRITE SYSTEM --- */
.avatar-box { 
    width: 60px; height: 80px; position: relative; 
    display: flex; justify-content: center; align-items: flex-end;
}

.spr { 
    width: 32px; height: 44px; position: absolute; bottom: 5px; 
    animation: idle 1.2s infinite ease-in-out;
}

.hd { /* Head Layer */
    width: 22px; height: 20px; background: #fca; 
    position: absolute; left: 5px; top: 0; z-index: 5; border-radius: 4px; 
}

.bd { /* Body Layer */
    width: 20px; height: 20px; background: #eee; 
    position: absolute; left: 6px; top: 18px; z-index: 3; border-radius: 2px; 
}

/* --- JOB COSTUME DB (Gradients) --- */
.j-Novice .bd { background: linear-gradient(#fff, #dca); }
.j-Swordman .bd { background: linear-gradient(#d84, #468); border: 1px solid #777; }
.j-Mage .bd { background: linear-gradient(90deg, #348, #eee); }
.j-Thief .bd { background: linear-gradient(#333, #525); }

/* --- MONSTER GEOMETRY DB --- */
[data-mob="Poring"] .hd { background: #fca; border-radius: 50%; width: 26px; height: 22px; top: 15px; }
[data-mob="Lunatic"] .hd { background: #fff; border-radius: 50%; width: 24px; height: 22px; top: 15px; }
[data-mob="Lunatic"]::after { content: 'V'; position: absolute; top: 5px; left: 8px; color: #fff; font-size: 12px; }

[data-mob="Angeling"] .hd { 
    background: #fff; border-radius: 50%; width: 34px; height: 30px; 
    top: 5px; box-shadow: 0 0 15px #fff; 
}

/* --- ANIMATIONS & UTILS --- */
@keyframes idle { 
    0%, 100% { transform: translateY(0); } 
    50% { transform: translateY(2px); } 
}

.anim-shake { animation: shake 0.2s cubic-bezier(.36,.07,.19,.97) both; }
@keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
}

.btn-neon {
    background: #000; color: #fff; border: 1px solid var(--c-n);
    padding: 10px; cursor: pointer; font-weight: bold; transition: 0.2s;
}
.btn-neon:active { background: var(--c-n); color: #000; }

.grid { display: grid; gap: 10px; }
.g-2 { grid-template-columns: 1fr 1fr; }
.g-6 { grid-template-columns: repeat(6, 1fr); }
.g-5 { grid-template-columns: repeat(5, 1fr); }

.flex { display: flex; justify-content: space-between; align-items: center; }
.c-n { color: var(--c-n); } .c-red { color: var(--hp); } .c-yel { color: var(--r); }
