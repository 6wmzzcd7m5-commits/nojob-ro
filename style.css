:root { 
    --bg:#050505; --p:#0a0a0a; --bd:#39ff14; 
    --n:#39ff14; --t:#ffffff; --d:#aaaaaa; 
    --hp:#ff4444; --sp:#4488ff; --r:#ffff00; 
    --font:'Tahoma', 'Arial', sans-serif; 
}

* { box-sizing:border-box; user-select:none; -webkit-tap-highlight-color:transparent; }

body {
    background: var(--bg); color: var(--t); font-family: var(--font); font-size: 11px;
    margin: 0; padding: 0; width: 100vw; height: 100dvh;
    display: flex; justify-content: center; align-items: center; overflow: hidden;
}

#app {
    width: 100%; max-width: 500px; height: 100%; 
    display: flex; flex-direction: column; gap: 6px; padding: 10px;
    border: 1px solid var(--bd); position: relative;
    background: var(--bg);
}

/* --- BUTTON FIXES --- */
button {
    background: #000; color: var(--n); border: 1px solid var(--bd);
    padding: 10px; font: inherit; font-weight: bold; cursor: pointer; 
    text-transform: uppercase;
    display: flex; align-items: center; justify-content: center;
    min-height: 35px; /* Prevents button collapse */
}

button:active, button.active { background: var(--n); color:#000; }

.btn-sm { padding:4px 8px; font-size:10px; min-height: 20px; }
.btn-red { border-color:var(--hp); color:var(--hp); }
.btn-neon { border: 2px solid var(--bd); color: var(--n); box-shadow: 0 0 10px rgba(57, 255, 20, 0.2); }

/* --- SPRITE ENGINE --- */
#stage {
    height: 120px; background: #111; border-bottom: 1px dashed var(--bd);
    display: flex; justify-content: space-between; align-items: flex-end;
    padding: 20px 40px; position: relative;
}

.avatar-box { width: 40px; height: 60px; position: relative; transition: transform 0.3s; }
.spr { width:30px; height:40px; position:absolute; bottom:0; left:5px; animation: idle 1s infinite steps(2); }
.hd { width:20px; height:18px; background:#fca; position:absolute; left:5px; top:0; z-index:5; border-radius:4px; }
.bd { width:18px; height:16px; background:#eee; position:absolute; left:6px; top:16px; z-index:3; border-radius:2px 2px 5px 5px; }
.hr { background:#853; position:absolute; }

.ro-m .hr { width:24px; height:10px; left:3px; top:-2px; z-index:6; border-radius:4px 4px 0 0; } 
.ro-f .hr { width: 28px; height: 26px; left: 1px; top: -3px; z-index: 2; border-radius: 12px 12px 6px 6px; box-shadow: 0 4px 0 rgba(0,0,0,0.3); }

.mvp-glow { filter: drop-shadow(0 0 10px var(--r)); animation: mvp-pulse 1s infinite alternate ease-in-out; }
@keyframes mvp-pulse { 0% { filter: drop-shadow(0 0 5px var(--r)); } 100% { filter: drop-shadow(0 0 15px #fff); } }
.mvp-scale { transform: scale(1.4) !important; transform-origin: bottom; }

/* --- ROGUELIKE CHOICE UI --- */
.skill-choice {
    text-align: left; display: flex; flex-direction: column; padding: 10px;
    border: 2px solid var(--bd); background: #000; margin-bottom: 5px;
    align-items: flex-start; justify-content: flex-start;
}
.sk-desc { font-size: 10px; color: var(--d); font-style: italic; pointer-events: none; }

/* --- LAYOUT --- */
.panel { border:1px solid var(--bd); background:var(--p); padding:6px; }
.flex { display:flex; justify-content:space-between; align-items:center; }
.grid { display:grid; gap:4px; } .g-2 { grid-template-columns:1fr 1fr; } .g-6 { grid-template-columns:repeat(6,1fr); }

progress { width:100%; height:6px; appearance:none; border:none; background:#222; }
progress::-webkit-progress-bar { background:#222; }
#bh::-webkit-progress-value { background:var(--hp); }
#ap::-webkit-progress-value { background:var(--n); }
#ae::-webkit-progress-value { background:var(--hp); }

.stat-cell { text-align:center; font-size:9px; color:#888; border-right:1px solid #222; }
.stv { color: #fff; font-weight: bold; display: block; font-size: 11px; }

@keyframes floatUp { 0%{opacity:1;transform:translateY(0)} 100%{opacity:0;transform:translateY(-30px)} }
.dmg-pop { position: absolute; font-weight: bold; font-size: 16px; text-shadow: 2px 2px 0 #000; animation: floatUp 0.8s forwards; pointer-events: none; width: 60px; text-align: center; z-index: 100; }
.dmg-w { color: #fff; } .dmg-m { color: #aaa; font-style: italic; }

.hide { display:none !important; }
.g-tag { padding: 8px 15px; border: 1px solid #444; cursor: pointer; text-align: center; }
.g-tag.active { border-color: var(--n); background: var(--n); color: #000; }
