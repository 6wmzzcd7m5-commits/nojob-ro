/* --- 1. CORE THEME & LAYOUT --- */
:root {
    --bg: #030303; 
    --panel: #0a0a0a; 
    --neon: #39ff14; /* Cyber Neon Green */
    --glow: rgba(57, 255, 20, 0.3);
    --hp: #ff2a2a; 
    --sp: #00bfff; 
    --zeny: #ffff00;
    --bd: #333;
    --impact: 'Impact', 'Arial Black', sans-serif;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body { 
    background: var(--bg); 
    color: var(--neon); 
    font-family: 'Tahoma', 'Arial', sans-serif; /* Mimics RO UI */
    font-size: 11px; 
    margin: 0 auto; 
    max-width: 500px; 
    height: 100dvh; /* Dynamic Viewport Height for Mobile */
    overflow: hidden; 
    display: flex; 
    flex-direction: column; 
}

/* --- 2. AEGIS TERMINAL COMPONENTS --- */
.panel { 
    background: var(--panel); 
    border: 1px solid var(--bd); 
    padding: 8px; 
    box-shadow: 0 0 10px var(--glow); 
}

button { 
    background: #000; 
    color: var(--neon); 
    border: 1px solid var(--neon); 
    padding: 8px; 
    font-weight: bold; 
    text-transform: uppercase; 
    cursor: pointer; 
    font-family: inherit;
    transition: 0.1s;
}

button:hover { background: var(--neon); color: #000; }
button:active { transform: scale(0.98); }

.btn-sm { padding: 2px 6px; font-size: 9px; }
.btn-red { border-color: var(--hp); color: var(--hp); }
.active { background: var(--neon); color: #000; }

/* --- 3. VITALS & ATB BARS --- */
.bar-container { 
    width: 100%; 
    height: 10px; 
    background: #111; 
    border: 1px solid #000; 
    overflow: hidden; 
    margin: 2px 0;
}

.fill { 
    height: 100%; 
    width: 0%; 
    transition: width 0.15s linear; 
}

#hp-fill { background: linear-gradient(to bottom, #ff5f5f, var(--hp)); }
#sp-fill { background: linear-gradient(to bottom, #5fbfff, var(--sp)); }

/* --- 4. CSS SPRITE ENGINE (Jobs & Mobs) --- */
.avatar-box { 
    width: 70px; 
    height: 80px; 
    display: flex; 
    align-items: flex-end; 
    justify-content: center; 
    position: relative; 
}

.spr { 
    width: 32px; 
    height: 48px; 
    position: relative; 
    z-index: 5;
    animation: idle 1.5s infinite ease-in-out; 
}

/* Base Body Parts */
.hd { 
    width: 22px; height: 20px; 
    background: #fca; /* Skin Tone */
    border: 1px solid #333; 
    border-radius: 4px; 
    position: absolute; 
    top: 0; left: 5px; 
    z-index: 2; 
}

.bd { 
    width: 26px; height: 28px; 
    border: 1px solid #333; 
    position: absolute; 
    bottom: 2px; left: 3px; 
    z-index: 1; 
    border-radius: 2px; 
}

/* --- JOB SPECIFIC COSTUMES --- */
/* 1st Jobs */
.j-Novice .bd { background: linear-gradient(#fff, #ccc); }
.j-Swordman .bd { background: linear-gradient(#d84, #842); }
.j-Mage .bd { background: linear-gradient(#4af, #25a); }
.j-Thief .bd { background: linear-gradient(#444, #111); }
.j-Archer .bd { background: linear-gradient(#4a4, #151); }
.j-Merchant .bd { background: linear-gradient(#84a, #415); }
.j-Acolyte .bd { background: linear-gradient(#eee, #aaa); border-left: 4px solid #aaf; }

/* 2nd Jobs (Elite Gold Accents) */
.j-Knight .bd { background: linear-gradient(#ffd700, #b8860b); border: 2px solid #fff; }
.j-Wizard .bd { background: linear-gradient(#9370db, #4b0082); box-shadow: 0 0 5px #fff; }
.j-Assassin .bd { background: linear-gradient(#222, #000); border-right: 5px solid #c00; }
.j-Hunter .bd { background: linear-gradient(#556b2f, #228b22); border-top: 3px solid #8b4513; }
.j-Blacksmith .bd { background: linear-gradient(#708090, #2f4f4f); border-bottom: 4px solid #ff4500; }
.j-Priest .bd { background: linear-gradient(#f0f8ff, #add8e6); border: 2px solid #ffd700; }

/* --- MONSTER SPECIFIC SPRITES --- */
/* Regular Mobs by Floor Tier */
#e-box[data-tier="1"] .bd { background: #8f8; border-radius: 50%; } 
#e-box[data-tier="2"] .bd { background: #555; clip-path: polygon(50% 0%, 100% 100%, 0% 100%); } 
#e-box[data-tier="3"] .bd { background: #a52a2a; border-radius: 10px 10px 0 0; } 
#e-box[data-tier="4"] .bd { background: #483d8b; transform: skewY(10deg); } 

/* MVP Special Effects */
.spr-mvp {
    filter: drop-shadow(0 0 8px #ffff00);
    animation: boss-glow 2s infinite alternate;
}

@keyframes boss-glow {
    from { transform: scale(1) translateY(0); filter: brightness(1) drop-shadow(0 0 5px #ff0); }
    to { transform: scale(1.1) translateY(-5px); filter: brightness(1.3) drop-shadow(0 0 15px #ff0); }
}

/* --- 5. ANIMATIONS --- */
@keyframes idle { 
    0%, 100% { transform: translateY(0); } 
    50% { transform: translateY(4px); } 
}

.lung { animation: lung-act 0.15s ease-in-out; }
@keyframes lung-act {
    0% { transform: translateX(0); }
    50% { transform: translateX(20px); }
    100% { transform: translateX(0); }
}

.shake { animation: shake-act 0.2s ease-in-out; }
@keyframes shake-act {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.dmg-pop { 
    position: absolute; 
    font-family: var(--impact); /* Impact font for Critical hits */
    font-size: 18px; 
    color: #fff; 
    text-shadow: 2px 2px #000; 
    pointer-events: none;
    z-index: 100;
    animation: float-dmg 0.8s ease-out forwards; 
}

@keyframes float-dmg {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-40px); opacity: 0; }
}

/* --- 6. UTILITY CLASSES --- */
.flex { display: flex; justify-content: space-between; align-items: center; }
.grid { display: grid; gap: 4px; }
.g-6 { grid-template-columns: repeat(6, 1fr); }
.g-1 { grid-template-columns: 1fr; }

.stat-cell { 
    border: 1px solid var(--bd); 
    text-align: center; 
    padding: 4px 2px; 
    background: #000; 
    font-size: 8px;
}
.stat-cell b { display: block; color: var(--neon); font-size: 10px; }

.c-n { color: var(--neon); }
.c-yel { color: var(--zeny); }
.c-red { color: var(--hp); }
.entry { border-bottom: 1px solid #1a1a1a; padding: 2px 0; color: #888; }
