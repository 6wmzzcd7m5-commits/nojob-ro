/* --- 1. CORE THEME & LAYOUT --- */
:root {
    --bg: #030303; 
    --panel: #0a0a0a; 
    --neon: #39ff14; /* Cyber Neon Green */
    --glow: rgba(57, 255, 20, 0.3);
    --hp: #ff2a2a; 
    --sp: #00bfff; 
    --zeny: #ffff00;
    --bd: #333;
    --impact: 'Impact', 'Arial Black', sans-serif;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body { 
    background: var(--bg); 
    color: var(--neon); 
    font-family: 'Tahoma', 'Arial', sans-serif; /* Mimics RO UI [cite: 6] */
    font-size: 11px; 
    margin: 0 auto; 
    max-width: 500px; 
    height: 100dvh; /* Dynamic Viewport Height [cite: 7] */
    overflow: hidden; 
    display: flex; 
    flex-direction: column; 
}

/* --- 2. AEGIS TERMINAL COMPONENTS --- */
.panel { 
    background: var(--panel); 
    border: 1px solid var(--bd); 
    padding: 8px; 
    box-shadow: 0 0 10px var(--glow); 
}

button { 
    background: #000; 
    color: var(--neon); 
    border: 1px solid var(--neon); 
    padding: 8px; 
    font-weight: bold; 
    text-transform: uppercase; 
    cursor: pointer; 
    font-family: inherit;
    transition: 0.1s;
}

button:hover { background: var(--neon); color: #000; }
button:active { transform: scale(0.98); }

.btn-sm { padding: 2px 6px; font-size: 9px; }
.btn-red { border-color: var(--hp); color: var(--hp); }

/* --- 3. VITALS & ATB BARS --- */
.bar-container { 
    width: 100%; 
    height: 10px; 
    background: #111; 
    border: 1px solid #000; 
    overflow: hidden; 
    margin: 2px 0;
}

.fill { 
    height: 100%; 
    width: 0%; 
    transition: width 0.15s linear; 
}

#hp-fill { background: linear-gradient(to bottom, #ff5f5f, var(--hp)); }
#sp-fill { background: linear-gradient(to bottom, #5fbfff, var(--sp)); }

/* --- 4. CSS SPRITE ENGINE (Section 3) --- */
.avatar-box { 
    width: 70px; 
    height: 80px; 
    display: flex; 
    align-items: flex-end; 
    justify-content: center; 
    position: relative; 
}

.spr { 
    width: 32px; 
    height: 48px; 
    position: relative; 
    z-index: 5;
}

/* Base Body Parts [cite: 25] */
.hd { 
    width: 22px; height: 20px; 
    background: #fca; /* Skin Tone */
    border: 1px solid #333; 
    border-radius: 4px; 
    position: absolute; 
    top: 0; left: 5px; 
    z-index: 2; 
}

.bd { 
    width: 26px; height: 28px; 
    border: 1px solid #333; 
    position: absolute; 
    bottom: 2px; left: 3px; 
    z-index: 1; 
    border-radius: 2px; 
}

/* Job-Specific Costume Gradients [cite: 27] */
.j-Novice .bd { background: linear-gradient(#fff, #ccc); }
.j-Swordman .bd { background: linear-gradient(#d84, #842); }
.j-Mage .bd { background: linear-gradient(#4af, #25a); }
.j-Thief .bd { background: linear-gradient(#444, #111); }

/* --- 5. ANIMATIONS (Section 4) --- */
/* Idle Bobbing [cite: 25] */
.spr { animation: idle 1.5s infinite ease-in-out; }
@keyframes idle { 
    0%, 100% { transform: translateY(0); } 
    50% { transform: translateY(4px); } 
}

/* Lung: Physical Attack [cite: 29] */
.lung { animation: lung-act 0.15s ease-in-out; }
@keyframes lung-act {
    0% { transform: translateX(0); }
    50% { transform: translateX(20px); }
    100% { transform: translateX(0); }
}

/* Shake: Hit Reaction [cite: 28] */
.shake { animation: shake-act 0.2s ease-in-out; }
@keyframes shake-act {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* Damage Popup [cite: 29] */
.dmg-pop { 
    position: absolute; 
    font-family: var(--impact); /* Section 1.A [cite: 6] */
    font-size: 18px; 
    color: #fff; 
    text-shadow: 2px 2px #000; 
    pointer-events: none;
    z-index: 100;
    animation: float-dmg 0.8s ease-out forwards; 
}

@keyframes float-dmg {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-40px); opacity: 0; }
}

/* --- 6. UTILITY CLASSES --- */
.flex { display: flex; justify-content: space-between; align-items: center; }
.grid { display: grid; gap: 4px; }
.g-6 { grid-template-columns: repeat(6, 1fr); }
.g-1 { grid-template-columns: 1fr; }

.stat-cell { 
    border: 1px solid var(--bd); 
    text-align: center; 
    padding: 4px 2px; 
    background: #000; 
    font-size: 8px;
}
.stat-cell b { display: block; color: var(--neon); font-size: 10px; }

.c-n { color: var(--neon); }
.c-yel { color: var(--zeny); }
.c-red { color: var(--hp); }
.entry { border-bottom: 1px solid #1a1a1a; padding: 2px 0; color: #888; }
