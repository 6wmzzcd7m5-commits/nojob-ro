<script>
window.DB_ITEMS = {
    // --- 1. CONSUMABLES (Kafra Logistics) ---
    consumables: [
        { n: 'Red Potion', type: 'heal', val: 60, desc: 'Heals 60 HP' },
        { n: 'Orange Potion', type: 'heal', val: 180, desc: 'Heals 180 HP' },
        { n: 'White Potion', type: 'heal', val: 500, desc: 'Heals 500 HP' },
        { n: 'Blue Potion', type: 'sp', val: 60, desc: 'Restores 60 SP' },
        { n: 'Yggdrasil Berry', type: 'full', val: 1.0, desc: 'Fully restores HP/SP' }
    ],

    // --- 2. EQUIPMENT (Midgard Armory) ---
    // These apply a permanent flat bonus to your character stats.
    equipment: [
        { n: 'Helm [1]', stat: 'vit', val: 3, desc: 'Solid steel. VIT +3' },
        { n: 'Plate Armor', stat: 'mh', val: 300, desc: 'Heavy protection. Max HP +300' },
        { n: 'Boots', stat: 'agi', val: 5, desc: 'Leather footwear. AGI +5' },
        { n: 'Mage Robe', stat: 'int', val: 5, desc: 'Silk infused with Mana. INT +5' },
        { n: 'Archer Gloves', stat: 'dex', val: 5, desc: 'Steady hands. DEX +5' },
        { n: 'Ring', stat: 'str', val: 5, desc: 'Increases might. STR +5' },
        { n: 'Rosary', stat: 'luk', val: 5, desc: 'Blessed beads. LUK +5' }
    ],

    // --- 3. MONSTER CARDS (Aegis Relics) ---
    // The most powerful rewards. Higher stat values than standard gear.
    cards: [
        { n: 'Poring Card', stat: 'luk', val: 12, desc: 'Pink jelly soul. LUK +12' },
        { n: 'Raydric Card', stat: 'vit', val: 15, desc: 'Abyssal defense. VIT +15' },
        { n: 'Ghostring Card', stat: 'mh', val: 1200, desc: 'Spectral form. Max HP +1200' },
        { n: 'Doppelganger Card', stat: 'agi', val: 20, desc: 'Haste shadow. AGI +20' },
        { n: 'Golden Thief Bug Card', stat: 'int', val: 22, desc: 'Gilded shell. INT +22' },
        { n: 'Baphomet Card', stat: 'str', val: 25, desc: 'Lord of Abyss. STR +25' },
        { n: 'Phreeoni Card', stat: 'dex', val: 30, desc: 'Perfect aim. DEX +30' }
    ]
};

/**
 * REWARD DRAFT GENERATOR
 * Pulls from Skills, Items, and Cards based on weighted probability.
 */
window.generateDraft = () => {
    const draft = [];
    const skillKeys = Object.keys(window.DB_SKILLS);
    
    for(let i = 0; i < 3; i++) {
        const roll = Math.random();
        
        if (roll < 0.15) { 
            // 15% Chance: Rare Monster Card
            const card = window.DB_ITEMS.cards[Math.floor(Math.random() * window.DB_ITEMS.cards.length)];
            draft.push({ ...card, cat: 'card' });
        } 
        else if (roll < 0.50) { 
            // 35% Chance: Gear or Potion
            const useEquip = Math.random() > 0.4;
            const pool = useEquip ? window.DB_ITEMS.equipment : window.DB_ITEMS.consumables;
            const item = pool[Math.floor(Math.random() * pool.length)];
            draft.push({ ...item, cat: 'item' });
        } 
        else { 
            // 50% Chance: New Skill or Skill Level-up
            const skName = skillKeys[Math.floor(Math.random() * skillKeys.length)];
            draft.push({ n: skName, ...window.DB_SKILLS[skName], cat: 'skill' });
        }
    }
    return draft;
};

console.log("AEGIS_ITEMS: LOOT_CORE_LOADED");
</script>
